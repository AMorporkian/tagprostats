{% extends "index.html" %}
{% block title %} Player stats for {{ name }} {% endblock %}

{% block content %}
<div class="container">
    <div class="main">
        <div class="panel panel-default">
            <!-- Default panel contents -->
            <div class="panel-heading">Stats for {{name}}</div>
            <div class="panel-body">


            <!-- Table -->
            <table class="table">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Value</th>
                    <th>Per Hour</th>
                    <th>Per Game</th>
                </tr>
                </thead>
                <tbody>
                {% for item, value in stats.iteritems() %}
                <tr>
                    <td>{{ item }}</td>
                    <td>{{ value }}</td>
                    <td>{{'%0.2f'| format(value/stats['Hours']|float)}}</td>
                    <td>{{'%0.2f'| format(value/stats['Games']|float)}}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table></div>
        <canvas id="myChart" width="400" height="400"></canvas>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    {{super()}}
    <script src="{{url_for('static', filename='chart.min.js')}}" type="text/javascript"></script>
    <script type="text/javascript">
        //Get context with jQuery - using jQuery's .get() method.
        //This will get the first returned node in the jQuery collection.

        $.getJSON( "/radar/{{name}}", function(data) {
            var ctx = $("#myChart").get(0).getContext("2d");
            var chart_data = {
            labels : ["Captures", "Drops", "Hold", "Popped", "Prevent", "Returns", "Support"],
            	datasets : [
		{
			fillColor : "rgba(220,220,220,0.5)",
			strokeColor : "rgba(220,220,220,1)",
			pointColor : "rgba(220,220,220,1)",
			pointStrokeColor : "#fff",
			data : data
		}]};
            var myNewChart = new Chart(ctx).Radar(chart_data);
        });
    </script>
{% endblock %}