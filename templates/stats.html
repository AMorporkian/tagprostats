{% extends "index.html" %}
{% block title %} Player stats for {{ name }} {% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-2">

            <div class="panel panel-default">
            <div class="panel-heading">
            <h3 class="text-center panel-title">Ranking (per game)</h3>
            </div>
            <div class="panel-body canvas-container">
            <canvas id="myChart" width="275" height="275"></canvas>
            </div>
            </div>

    </div>
    <div class="col-lg-10">
        <div class="row">
            <div class="col-lg-6">
            <div class="panel panel-default">
                <!-- Default panel contents -->
                <div class="panel-heading"><h3 class="panel-title text-center">All-time stats for {{name}}</h3></div>
                <div class="panel-body">
                    <a href="http://tagpro-origin.koalabeast.com/profile/{{profile_string}}"><span class="glyphicon glyphicon-link pull-right"></span></a><h6 class="text-center">Last updated: {{humanize(last_updated)}}</h6>
                </div>
                    <!-- Table -->
                    <table class="table">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Value</th>
                            <th>Per Hour</th>
                            <th>Per Game</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for item, value in stats.iteritems() %}
                        <tr>
                            <td>{{ item }}</td>
                            <td><a href="#">{{value}}<span class="badge pull-right">Ranked {{ordinalize(ranks[item])}}</span></a></td>
                            <td>{{'%0.2f'|
                                format(value/stats['Hours']|float)}}
                            </td>
                            <td>{{'%0.2f'|
                                format(value/stats['Games']|float)}}
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
            </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
{{super()}}
<script src="{{url_for('static', filename='chart.min.js')}}"
        type="text/javascript"></script>
<script type="text/javascript">
        //Get context with jQuery - using jQuery's .get() method.
        //This will get the first returned node in the jQuery collection.

        $.getJSON( "/radar/{{name}}", function(data) {
            var ctx = $("#myChart").get(0).getContext("2d");
            var chart_data = {
            labels : ["Captures", "Drops", "Hold", "Popped", "Prevent", "Returns", "Support"],
            	datasets : [
		{
			data : data,
			fillColor : "rgba(30,30,220,0.5)",
			strokeColor : "rgba(60,60,220,1)",
			pointColor : "rgba(90,90,220,1)",
			pointStrokeColor : "#fff",
		}]};
		    var options = {
		    scaleOverlay: true,
			scaleOverride: true,
			scaleStartValue: 0,
			scaleSteps: 4,
			scaleStepWidth: .25,

		    };

            var myNewChart = new Chart(ctx).Radar(chart_data, options);
        });


</script>
{% endblock %}